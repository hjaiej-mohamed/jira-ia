# --------------------------------------------------------------
#  Application identity
# --------------------------------------------------------------
spring:
  application:
    name: mcp                         # <-- used in logs & Zipkin service name

  # Reactor & virtual threads
  threads:
    virtual:
      enabled: true
  reactor:
    context-propagation: auto        # <-- **CRITICAL** for traceId in async

# --------------------------------------------------------------
#  Spring AI ? LLM & Embedding
# --------------------------------------------------------------
spring.ai.openai.chat:
  base-url: http://10.10.10.75:8080
  options:
    model: Meta-Llama-3-8B-Instruct-Q5_K_M.gguf
    temperature: 0.1
spring.ai.openai.embedding:
  base-url: http://10.10.10.75:8080
  options:
    model: nomic-embed-text-v1.5-f16.gguf
    dimensions: 768

spring.ai.chat.client.enabled: true
spring.ai.openai.chat.api-key: any
spring.ai.openai.api-key: any

# --------------------------------------------------------------
#  Qdrant Vector Store
# --------------------------------------------------------------
spring.ai.vectorstore.qdrant:
  host: 10.10.10.101
  port: 6334
  use-tls: false
  api-key: ""
  collection-name: Jira2



# -------------------------------------------------------------
#  Observability ? Tracing & Metrics
# -------------------------------------------------------------
management:
  endpoint:
    health:
      show-details: always
  endpoints:
    web:
      exposure:
        include: health,info,metrics,traces,prometheus
  tracing:
    sampling:
      probability: 1.0               # 100 % in dev ? lower in prod
    propagation:
      type: w3c,b3                   # works with Zipkin & any OTLP collector
  zipkin:
    tracing:
      endpoint: http://10.10.10.101:9411/api/v2/spans   # <-- v2 API!

# ---------------------------------------------------------------
#  Logging (Logback)
# ---------------------------------------------------------------
logging:
  config: classpath:logback-dev.xml
  level:
    root: INFO
    com.jira.mcp: TRACE